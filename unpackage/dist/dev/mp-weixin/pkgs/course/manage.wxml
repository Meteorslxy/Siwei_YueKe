<view class="course-management-wrapper"><view class="course-management-container"><view class="header"><view class="title">课程管理</view><button data-event-opts="{{[['tap',[['addNewCourse',['$event']]]]]}}" class="add-btn" bindtap="__e">添加课程</button></view><view class="filter-section"><view class="search-box"><uni-icons vue-id="2ed57967-1" type="search" size="18" color="#999" bind:__l="__l"></uni-icons><input class="search-input" type="text" placeholder="搜索课程名称" data-event-opts="{{[['input',[['__set_model',['','searchKeyword','$event',[]]],['searchCourses',['$event']]]]]}}" value="{{searchKeyword}}" bindinput="__e"/></view><view class="filter-tabs"><block wx:for="{{filterTabs}}" wx:for-item="tab" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['switchTab',[index]]]]]}}" class="{{['tab-item',activeTabIndex===index?'active':'']}}" bindtap="__e">{{''+tab+''}}</view></block></view></view><block wx:if="{{$root.g0>0}}"><view class="course-list"><block wx:for="{{filteredCourses}}" wx:for-item="course" wx:for-index="index" wx:key="id"><view class="course-item"><view class="course-info"><view class="course-name">{{course.name}}</view><view class="course-details"><view class="detail-item"><text class="label">课程类型：</text><text>{{course.type}}</text></view><view class="detail-item"><text class="label">课时：</text><text>{{course.duration+" 分钟/节"}}</text></view><view class="detail-item"><text class="label">价格：</text><text>{{"¥"+course.price}}</text></view><view class="detail-item"><text class="label">状态：</text><text class="{{['status',course.status==='已上线'?'online':'offline']}}">{{course.status}}</text></view></view></view><view class="course-actions"><view class="action-buttons"><view data-event-opts="{{[['tap',[['handleEditCourse',[index]]]]]}}" class="btn edit-btn" bindtap="__e">编辑</view><view data-event-opts="{{[['tap',[['handleGenerateSchedule',[index]]]]]}}" class="btn schedule-btn" bindtap="__e">排课</view><view data-event-opts="{{[['tap',[['generateCourseSchedule',['$0',true],['filteredCourses.'+index+'']]]]]}}" class="btn preview-btn" bindtap="__e">预览</view><block wx:if="{{course.status==='已下线'}}"><view data-event-opts="{{[['tap',[['handleToggleStatus',[index]]]]]}}" class="btn publish-btn" bindtap="__e">上线</view></block><block wx:else><view data-event-opts="{{[['tap',[['handleToggleStatus',[index]]]]]}}" class="btn unpublish-btn" bindtap="__e">下线</view></block><view data-event-opts="{{[['tap',[['handleDeleteCourse',[index]]]]]}}" class="btn delete-btn" bindtap="__e">删除</view></view></view></view></block></view></block><block wx:else><view class="empty-state"><image class="empty-image" src="/static/images/empty.png" mode="aspectFit"></image><text class="empty-text">暂无课程数据</text></view></block></view><block wx:if="{{showPreviewModal}}"><view class="schedule-preview-modal"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-header"><text class="modal-title">课程安排预览</text><text data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="modal-close" bindtap="__e">×</text></view><scroll-view class="modal-body" scroll-y="true"><block wx:for="{{formattedSchedules}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="schedule-item"><view class="schedule-date">{{item.date+''}}<text class="weekday">{{item.weekday}}</text></view><view class="schedule-time">{{item.startTime+" - "+item.endTime}}</view></view></block><block wx:if="{{$root.g1===0}}"><view class="no-schedules">暂无课程安排</view></block></scroll-view><view class="modal-footer"><button data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="btn-cancel" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['saveScheduleFromPreview',['$event']]]]]}}" class="btn-confirm" bindtap="__e">保存安排</button></view></view></view></block></view>