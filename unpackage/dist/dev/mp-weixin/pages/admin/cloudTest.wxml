<view class="container"><view class="header"><text class="title">阿里云函数连接测试</text></view><view class="info-section"><view class="info-item"><text class="label">云服务商:</text><text class="value">阿里云</text></view><view class="info-item"><text class="label">云环境ID:</text><text class="value">{{spaceId}}</text><text data-event-opts="{{[['tap',[['copySpaceId',['$event']]]]]}}" class="copy-btn" bindtap="__e">复制</text></view><view class="info-item"><text class="label">当前模式:</text><text class="{{['value',isDevMode?'warning':'success']}}">{{''+(isDevMode?'模拟数据模式':'云服务模式')+''}}</text></view></view><view class="mode-selector"><view class="section-title">测试模式</view><radio-group data-event-opts="{{[['change',[['onModeChange',['$event']]]]]}}" bindchange="__e"><block wx:for="{{testModes}}" wx:for-item="item" wx:for-index="index" wx:key="index"><label class="mode-item"><radio value="{{item.value}}" checked="{{item.value===currentMode}}"></radio><text>{{item.name}}</text></label></block></radio-group></view><view class="test-panel"><view class="panel-title">云函数测试</view><view class="test-group"><view class="test-name">常规测试</view><view class="test-desc">使用uni.cloud调用云函数</view><button type="primary" loading="{{loading.normal}}" data-event-opts="{{[['tap',[['runTest',['normal']]]]]}}" bindtap="__e">测试</button><block wx:if="{{results.normal}}"><view class="result"><view class="{{['status',results.normal.success?'success':'error']}}">{{''+(results.normal.success?'成功':'失败')+''}}</view><view class="message">{{results.normal.message}}</view></view></block></view><view class="test-group"><view class="test-name">直接初始化测试</view><view class="test-desc">先重新初始化云环境再调用</view><button type="primary" loading="{{loading.init}}" data-event-opts="{{[['tap',[['runTest',['init']]]]]}}" bindtap="__e">测试</button><block wx:if="{{results.init}}"><view class="result"><view class="{{['status',results.init.success?'success':'error']}}">{{''+(results.init.success?'成功':'失败')+''}}</view><view class="message">{{results.init.message}}</view></view></block></view><view class="test-group"><view class="test-name">错误处理测试</view><view class="test-desc">详细显示错误信息</view><button type="primary" loading="{{loading.error}}" data-event-opts="{{[['tap',[['runTest',['error']]]]]}}" bindtap="__e">测试</button><block wx:if="{{results.error}}"><view class="result"><view class="{{['status',results.error.success?'success':'error']}}">{{''+(results.error.success?'成功':'失败')+''}}</view><view class="message">{{results.error.message}}</view><block wx:if="{{results.error.details}}"><view class="details"><text selectable="{{true}}">{{results.error.details}}</text></view></block></view></block></view></view><view class="actions"><button type="default" data-event-opts="{{[['tap',[['checkCloudFiles',['$event']]]]]}}" bindtap="__e">检查云函数文件</button><button type="default" data-event-opts="{{[['tap',[['resetCloudEnv',['$event']]]]]}}" bindtap="__e">重置云环境</button><button type="warn" data-event-opts="{{[['tap',[['toggleDevMode',['$event']]]]]}}" bindtap="__e">{{''+(isDevMode?'切换到云服务模式':'切换到模拟数据模式')+''}}</button></view><block wx:if="{{$root.g0>0}}"><view class="log-section"><view class="section-title">日志</view><scroll-view class="log-content" scroll-y="{{true}}"><block wx:for="{{logs}}" wx:for-item="log" wx:for-index="index" wx:key="index"><view class="{{['log-item',log.type]}}"><text class="log-time">{{log.time}}</text><text class="log-message" selectable="{{true}}">{{log.message}}</text></view></block></scroll-view><button size="mini" type="default" data-event-opts="{{[['tap',[['clearLogs',['$event']]]]]}}" bindtap="__e">清除日志</button></view></block></view>