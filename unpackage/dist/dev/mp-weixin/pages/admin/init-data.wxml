<view class="init-data-container"><view class="header"><view class="title">系统数据初始化</view></view><view class="init-card"><view class="card-title">校区数据初始化</view><view class="card-desc">初始化将会添加预设的校区数据到数据库中。如果选择清空数据，将会先删除已有的校区数据。</view><view class="option-row"><checkbox-group data-event-opts="{{[['change',[['onClearChange',['$event']]]]]}}" bindchange="__e"><label class="checkbox-label"><checkbox checked="{{clearData}}"></checkbox><text>清空现有数据</text></label></checkbox-group></view><view class="btn-row"><button class="init-btn" disabled="{{loading}}" data-event-opts="{{[['tap',[['initLocationData',['$event']]]]]}}" bindtap="__e">{{loading?'初始化中...':'初始化校区数据'}}</button></view><block wx:if="{{resultMessage}}"><view class="result-box"><text class="{{['result-text',(resultCode===0)?'success':'',(resultCode===1)?'warning':'',(resultCode===-1)?'error':'']}}">{{''+resultMessage+''}}</text></view></block></view><view class="init-card"><view class="card-title">查看校区数据</view><view class="card-desc">查看当前数据库中的校区数据列表。</view><view class="btn-row"><button class="view-btn" disabled="{{dataLoading}}" data-event-opts="{{[['tap',[['getLocationData',['$event']]]]]}}" bindtap="__e">{{dataLoading?'加载中...':'查看校区数据'}}</button></view><block wx:if="{{$root.g0>0}}"><view class="data-list"><view class="list-header"><text class="header-item">校区名称</text><text class="header-item">所在区域</text><text class="header-item">操作</text></view><block wx:for="{{locationList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="list-item"><text class="item-name">{{item.name}}</text><text class="item-district">{{item.district}}</text><view class="item-actions"><text data-event-opts="{{[['tap',[['viewDetail',['$0'],[[['locationList','',index]]]]]]]}}" class="action-btn" bindtap="__e">查看</text></view></view></block></view></block><block wx:else><block wx:if="{{dataLoaded}}"><view class="empty-tip"><text>暂无校区数据</text></view></block></block></view></view>