<view class="profile-container"><view class="header"><text class="title">个人资料</text><view data-event-opts="{{[['tap',[['refreshUsername',['$event']]]]]}}" class="refresh-btn" bindtap="__e"><text>{{isRefreshing?'加载中...':'刷新'}}</text></view></view><view data-event-opts="{{[['tap',[['refreshUsername',['$event']]]]]}}" class="username-box" bindtap="__e"><view class="username-content"><text class="username-label">用户名</text><text class="username-value">{{userInfo.username||'未设置'}}</text></view><text class="username-refresh">点击刷新</text></view><view class="profile-form"><view data-event-opts="{{[['tap',[['changeAvatar',['$event']]]]]}}" class="form-item" bindtap="__e"><text class="item-label">头像</text><view class="item-content"><image class="avatar" src="{{userInfo.avatar||'/static/images/avatar.png'}}" mode="aspectFill"></image><text class="item-arrow iconfont icon-right"></text></view></view><view data-event-opts="{{[['tap',[['editUsername',['$event']]]]]}}" class="form-item" bindtap="__e"><text class="item-label">登录名</text><view class="item-content"><text class="item-value">{{userInfo.username||'未设置'}}</text><text class="item-arrow iconfont icon-right"></text></view></view><view data-event-opts="{{[['tap',[['editField',['nickname']]]]]}}" class="form-item" bindtap="__e"><text class="item-label">昵称</text><view class="item-content"><text class="item-value">{{userInfo.nickname||'未设置'}}</text><text class="item-arrow iconfont icon-right"></text></view></view><view data-event-opts="{{[['tap',[['editField',['gender']]]]]}}" class="form-item" bindtap="__e"><text class="item-label">性别</text><view class="item-content"><text class="item-value">{{genderText}}</text><text class="item-arrow iconfont icon-right"></text></view></view><view data-event-opts="{{[['tap',[['editField',['introduction']]]]]}}" class="form-item" bindtap="__e"><text class="item-label">个人简介</text><view class="item-content"><text class="item-value">{{userInfo.introduction||'未设置'}}</text><text class="item-arrow iconfont icon-right"></text></view></view></view><block wx:if="{{showPopup}}"><view data-event-opts="{{[['tap',[['cancelEdit',['$event']]]]]}}" class="popup-mask" bindtap="__e"></view></block><block wx:if="{{showPopup}}"><view class="popup-container"><view class="popup-header"><view data-event-opts="{{[['tap',[['cancelEdit',['$event']]]]]}}" class="popup-cancel" bindtap="__e">取消</view><view class="popup-title">{{editTitle}}</view><view data-event-opts="{{[['tap',[['savePopupEdit',['$event']]]]]}}" class="popup-save" bindtap="__e">保存</view></view><view class="popup-content"><block wx:if="{{editType==='text'}}"><input class="popup-input" placeholder="{{'请输入'+editTitle}}" maxlength="{{maxLength}}" focus="{{true}}" data-event-opts="{{[['input',[['__set_model',['','tempFieldValue','$event',[]]]]]]}}" value="{{tempFieldValue}}" bindinput="__e"/></block><block wx:if="{{editType==='textarea'}}"><textarea class="popup-textarea" placeholder="{{'请输入'+editTitle}}" maxlength="{{maxLength}}" auto-height="{{true}}" focus="{{true}}" data-event-opts="{{[['input',[['__set_model',['','tempFieldValue','$event',[]]]]]]}}" value="{{tempFieldValue}}" bindinput="__e"></textarea></block><block wx:if="{{editType==='text'||editType==='textarea'}}"><text class="popup-count">{{''+$root.g0+"/"+maxLength+''}}</text></block></view></view></block></view>