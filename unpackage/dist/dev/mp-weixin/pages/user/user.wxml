<view class="user-container"><view class="user-info-section"><view class="user-bg"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-button" bindtap="__e"><text>←</text></view><view data-event-opts="{{[['tap',[['reload',['$event']]]]]}}" class="refresh-button" bindtap="__e"><text>⟳</text></view></view><view class="user-info"><view class="avatar-wrap"><image class="user-avatar" src="{{userInfo.avatarUrl||'/static/images/avatar.jpg'}}" mode="aspectFill"></image></view><view class="user-detail"><block wx:if="{{hasUserInfo}}"><text class="user-name">{{$root.m0}}</text></block><block wx:else><button data-event-opts="{{[['tap',[['getUserProfile',['$event']]]]]}}" class="login-btn" bindtap="__e">点击登录</button></block></view></view></view><block wx:if="{{!hasContent}}"><view class="reload-container"><image src="/static/images/empty.png" mode="aspectFit"></image><text>内容加载失败</text><button data-event-opts="{{[['tap',[['reload',['$event']]]]]}}" class="reload-btn" bindtap="__e">点击重新加载</button></view></block><block wx:else><view class="menu-section"><view class="menu-group"><view class="menu-title">预约记录<text data-event-opts="{{[['tap',[['refreshBookingCount',['$event']]]]]}}" class="refresh-link" bindtap="__e">刷新</text></view><view class="menu-content"><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/booking?status=all']]]]]}}" class="menu-item" bindtap="__e"><image class="item-icon-img" src="/static/images/my/all.png" mode="aspectFit" data-event-opts="{{[['error',[['handleImageError',['$event']]]]]}}" binderror="__e"></image><text class="item-text">全部</text></view><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/booking?status=usable']]]]]}}" class="menu-item" bindtap="__e"><image class="item-icon-img" src="/static/images/my/use.png" mode="aspectFit" data-event-opts="{{[['error',[['handleImageError',['$event']]]]]}}" binderror="__e"></image><text class="item-text">可使用</text><block wx:if="{{bookingCounts.usable>0}}"><text class="item-badge">{{bookingCounts.usable}}</text></block></view><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/booking?status=expired']]]]]}}" class="menu-item" bindtap="__e"><image class="item-icon-img" src="/static/images/my/out.png" mode="aspectFit" data-event-opts="{{[['error',[['handleImageError',['$event']]]]]}}" binderror="__e"></image><text class="item-text">已过期</text></view><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/booking?status=canceled']]]]]}}" class="menu-item" bindtap="__e"><image class="item-icon-img" src="/static/images/my/cancal.png" mode="aspectFit" data-event-opts="{{[['error',[['handleImageError',['$event']]]]]}}" binderror="__e"></image><text class="item-text">已取消</text></view></view></view><view class="menu-group"><view class="menu-title">我的服务</view><view class="menu-list"><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/favorite/index']]]]]}}" class="menu-list-item" bindtap="__e"><text class="list-icon iconfont icon-favorite"></text><text class="list-text">我的收藏</text><text class="list-arrow iconfont icon-right"></text></view><view data-event-opts="{{[['tap',[['openFeedback',['$event']]]]]}}" class="menu-list-item" bindtap="__e"><text class="list-icon iconfont icon-feedback"></text><text class="list-text">意见反馈</text><text class="list-arrow iconfont icon-right"></text></view><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/about/index']]]]]}}" class="menu-list-item" bindtap="__e"><text class="list-icon iconfont icon-about"></text><text class="list-text">关于我们</text><text class="list-arrow iconfont icon-right"></text></view><view data-event-opts="{{[['tap',[['navigateTo',['/pages/user/setting/index']]]]]}}" class="menu-list-item" bindtap="__e"><text class="list-icon iconfont icon-setting"></text><text class="list-text">设置</text><text class="list-arrow iconfont icon-right"></text></view><block wx:if="{{isDev}}"><view data-event-opts="{{[['tap',[['navigateTo',['/pages/admin/import-data']]]]]}}" class="menu-list-item" bindtap="__e"><text class="list-icon iconfont icon-setting"></text><text class="list-text">云数据库导入工具</text><text class="list-arrow iconfont icon-right"></text></view></block></view></view><view class="menu-group"><view class="menu-title">测试功能</view><view class="menu-list"><view data-event-opts="{{[['tap',[['testUniIdPages',['login']]]]]}}" class="menu-list-item test-btn" bindtap="__e"><text class="list-icon iconfont icon-user"></text><text class="list-text">测试统一登录</text><text class="list-arrow iconfont icon-right"></text></view><view data-event-opts="{{[['tap',[['testUniIdPages',['register']]]]]}}" class="menu-list-item test-btn" bindtap="__e"><text class="list-icon iconfont icon-user"></text><text class="list-text">测试统一注册</text><text class="list-arrow iconfont icon-right"></text></view><view data-event-opts="{{[['tap',[['testUniIdPages',['profile']]]]]}}" class="menu-list-item test-btn" bindtap="__e"><text class="list-icon iconfont icon-user"></text><text class="list-text">测试个人资料</text><text class="list-arrow iconfont icon-right"></text></view></view></view></view></block><view class="bottom-area"><block wx:if="{{isDev}}"><view data-event-opts="{{[['tap',[['navigateToAdminLogin',['$event']]]]]}}" class="admin-entry-btn" bindtap="__e">管理员入口</view></block><block wx:if="{{hasUserInfo}}"><view data-event-opts="{{[['tap',[['logout',['$event']]]]]}}" class="logout-btn" bindtap="__e">退出登录</view></block><view class="safe-area-bottom"></view></view></view>