<view class="booking-container"><view class="tab-bar"><block wx:for="{{$root.l0}}" wx:for-item="tab" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['changeTab',['$0'],[[['tabs','',index,'value']]]]]]]}}" class="{{['tab-item',(currentStatus===tab.$orig.value)?'active':'']}}" bindtap="__e">{{''+tab.$orig.label+''}}<block wx:if="{{tab.m0>0}}"><view class="badge">{{tab.m1}}</view></block></view></block></view><view class="booking-list"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index"><view class="booking-item" data-booking-id="{{item.$orig._id}}" data-course-id="{{item.$orig.courseId}}" data-event-opts="{{[['tap',[['viewDetail',['$0','$event'],[[['filteredBookingList','_id||index',item.$orig._id||index]]]]]]]}}" bindtap="__e"><view class="booking-content"><view class="booking-main"><view class="course-info"><view class="course-title">{{item.$orig.courseTitle||item.$orig.title}}</view><block wx:if="{{item.m2}}"><view class="payment-status-row"><view class="{{['booking-status','status-'+item.$orig.status]}}">{{item.m3}}</view><view class="payment-countdown"><text class="countdown-label">支付倒计时：</text><text class="countdown-time">{{item.m4}}</text></view></view></block><block wx:else><view class="payment-status-row"><view class="{{['booking-status','status-'+item.$orig.status]}}">{{item.m5}}</view></view></block><block wx:if="{{item.$orig.isCourseDeleted}}"><view class="course-deleted-tag">课程已删除</view></block><block wx:if="{{item.m6}}"><view class="auto-cancel-tag">超时未支付自动取消</view></block></view><view class="booking-details"><view class="details-column left-column"><view class="detail-row"><text class="detail-label">预约编号</text><text class="detail-value">{{item.$orig.bookingId}}</text></view><view class="detail-row"><text class="detail-label">课程时间</text><text class="detail-value">{{item.m7}}</text></view><view class="detail-row"><text class="detail-label">课程日期</text><text class="detail-value">{{item.m8}}</text></view></view><view class="details-column right-column"><view class="detail-row"><text class="detail-label">学生姓名</text><text class="detail-value">{{item.$orig.studentName}}</text></view><view class="detail-row"><text class="detail-label">联系电话</text><text class="detail-value">{{item.$orig.contactPhone||'暂无'}}</text></view><view class="detail-row"><text class="detail-label">校区地点</text><text class="detail-value">{{item.$orig.schoolName||'未知'}}</text></view><block wx:if="{{item.$orig.teacherName}}"><view class="detail-row teacher-row"><text class="detail-label">任课教师</text><text class="detail-value teacher-name">{{item.$orig.teacherName}}</text></view></block></view></view><view class="booking-time">{{''+item.m9+''}}</view></view></view><block wx:if="{{item.m10}}"><view class="booking-footer"><view class="booking-actions"><block wx:if="{{item.$orig&&item.$orig.status!=='cancelled'&&item.$orig.status!=='finished'}}"><view data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" data-event-params="{{({item:item.$orig})}}" class="action-btn primary" catchtap="__e">取消预约</view></block><block wx:if="{{item.m11}}"><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({item:item.$orig})}}" class="action-btn pay-btn" catchtap="__e">去缴费</view></block><block wx:if="{{item.m12}}"><view data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" data-event-params="{{({item:item.$orig})}}" class="action-btn" catchtap="__e">联系老师</view></block><block wx:if="{{item.$orig.paymentStatus==='paid'||item.$orig.isPaid===true}}"><view data-event-opts="{{[['tap',[['e3',['$event']]]]]}}" data-event-params="{{({item:item.$orig})}}" class="action-btn refund-btn" catchtap="__e">申请退费</view></block></view></view></block></view></block><load-more vue-id="5bb75a38-1" status="{{loadMoreStatus}}" data-event-opts="{{[['^click',[['loadMore']]]]}}" bind:click="__e" bind:__l="__l"></load-more><block wx:if="{{$root.g0===0}}"><empty-tip vue-id="5bb75a38-2" tip="{{$root.m13}}" bind:__l="__l"></empty-tip></block></view></view>