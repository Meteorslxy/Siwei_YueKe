<view class="login-container"><image class="bg-image" src="https://mp-d0c06b27-ec33-40fe-b28b-337811bd2f29.cdn.bspapp.com/images/a3ef4ccc-5a4d-4ad5-9697-fd22b2288237" mode="aspectFill"></image><view class="custom-nav" style="{{'padding-top:'+(statusBarHeight+'px')+';'}}"><view class="nav-content"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="nav-back" bindtap="__e"><text class="back-icon">←</text></view><text class="nav-title">登录</text></view></view><block wx:if="{{showEmbeddedPhoneLogin}}"><view class="embedded-phone-login"><view class="login-content"><text class="login-title">请选择登录方式</text><text class="login-subtitle">未注册的账号验证通过后将自动注册</text><view class="phone-input-box"><text class="area-code">+86</text><input class="phone-input" type="number" maxlength="11" placeholder="请输入手机号" data-event-opts="{{[['input',[['__set_model',['','phone','$event',[]]]]]]}}" value="{{phone}}" bindinput="__e"/></view><view class="agreement-box"><checkbox bindinput="__e" style="transform:scale(0.7);" color="#EC7A49" value="{{agreed}}" data-event-opts="{{[['input',[['__set_model',['','agreed','$event',[]]]]]]}}"></checkbox><text class="agreement-text">同意</text><text data-event-opts="{{[['tap',[['showAgreement',['user']]]]]}}" class="agreement-link" bindtap="__e">《用户服务协议》</text><text class="agreement-text">和</text><text data-event-opts="{{[['tap',[['showAgreement',['privacy']]]]]}}" class="agreement-link" bindtap="__e">《隐私政策条款》</text></view><button class="get-code-btn" type="primary" data-event-opts="{{[['tap',[['getVerificationCode',['$event']]]]]}}" bindtap="__e">获取验证码</button></view></view></block><block wx:else><view class="content"><view class="header"><image class="logo" src="https://mp-d0c06b27-ec33-40fe-b28b-337811bd2f29.cdn.bspapp.com/images/logo.png" mode="aspectFit"></image></view><view class="auth-buttons"><button class="auth-btn wechat-btn" open-type="getPhoneNumber" data-event-opts="{{[['getphonenumber',[['onGetPhoneNumber',['$event']]]]]}}" bindgetphonenumber="__e"><image class="btn-icon" src="../../static/images/wechat.png" mode="aspectFit"></image>一键授权登录/注册</button><button data-event-opts="{{[['tap',[['showLoginOptions',['$event']]]]]}}" class="auth-btn other-login-btn" bindtap="__e">其他登录方式</button></view><view class="footer"><view class="agreement"><text class="dot"></text><text class="agreement-text">登录即代表同意</text><text data-event-opts="{{[['tap',[['showUserAgreement',['$event']]]]]}}" class="link" bindtap="__e">《用户协议》</text><text class="agreement-text">和</text><text data-event-opts="{{[['tap',[['showPrivacyPolicy',['$event']]]]]}}" class="link" bindtap="__e">《隐私政策》</text></view></view></view></block><block wx:if="{{showLoginOptionsModal}}"><view class="login-options-modal"><view data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">登录方式</view><view class="login-options"><view data-event-opts="{{[['tap',[['selectLoginType',['phonePassword']]]]]}}" class="login-option-item" bindtap="__e"><text class="option-icon">🔐</text><text class="option-text">账号密码登录</text></view><view data-event-opts="{{[['tap',[['selectLoginType',['phoneVerify']]]]]}}" class="login-option-item" bindtap="__e"><text class="option-icon">📱</text><text class="option-text">手机号验证码登录</text></view><view data-event-opts="{{[['tap',[['selectLoginType',['register']]]]]}}" class="login-option-item" bindtap="__e"><text class="option-icon">📝</text><text class="option-text">注册账号</text></view></view><view class="modal-close"><text data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="close-btn" bindtap="__e">关闭</text></view></view></view></block><block wx:if="{{$root.g0>0}}"><view class="third-login"><view class="third-title"><view class="line"></view><text>第三方登录</text><view class="line"></view></view><view class="auth-items"></view></view></block><block wx:if="{{showUserProfileModal}}"><view class="user-profile-modal"><view data-event-opts="{{[['tap',[['cancelUserProfile',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">完善个人信息</view><view class="modal-subtitle">请允许授权获取您的微信头像和昵称</view><view class="user-info-form"><view class="avatar-wrapper"><image class="avatar-preview" src="{{userProfileData.avatarUrl||'/static/images/default-avatar.png'}}" mode="aspectFill"></image><button class="avatar-btn" open-type="chooseAvatar" data-event-opts="{{[['chooseavatar',[['onChooseAvatar',['$event']]]]]}}" bindchooseavatar="__e">选择头像</button></view><view class="nickname-wrapper"><text class="input-label">昵称：</text><input type="nickname" placeholder="请输入您的昵称" data-event-opts="{{[['change',[['onNicknameChange',['$event']]]],['input',[['__set_model',['$0','nickName','$event',[]],['userProfileData']]]]]}}" value="{{userProfileData.nickName}}" bindchange="__e" bindinput="__e"/></view></view><view class="modal-actions"><button data-event-opts="{{[['tap',[['cancelUserProfile',['$event']]]]]}}" class="cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmUserProfile',['$event']]]]]}}" class="confirm-btn" bindtap="__e">确认</button></view></view></view></block></view>