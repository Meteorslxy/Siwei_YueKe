<view class="login-container"><image class="bg-image" src="/static/images/login.png" mode="aspectFill"></image><view class="custom-nav" style="{{'padding-top:'+(statusBarHeight+'px')+';'}}"><view class="nav-content"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="nav-back" bindtap="__e"><text class="back-icon">←</text></view><text class="nav-title">登录</text></view></view><view class="content"><view class="header"><image class="logo" src="../../static/images/logo.png" mode="aspectFit"></image></view><view class="auth-buttons"><button class="auth-btn wechat-btn" open-type="getUserInfo" data-event-opts="{{[['getuserinfo',[['handleUserInfo',['$event']]]]]}}" bindgetuserinfo="__e"><image class="btn-icon" src="/static/images/wechat.png" mode="aspectFit"></image>微信登录</button><button data-event-opts="{{[['tap',[['showLoginOptions',['$event']]]]]}}" class="auth-btn other-login-btn" bindtap="__e">其他登录方式</button><button data-event-opts="{{[['tap',[['checkLoginStatus',['$event']]]]]}}" class="auth-btn debug-btn" bindtap="__e">检查登录状态</button></view><view class="footer"><view class="agreement"><text class="dot"></text><text class="agreement-text">登录即代表同意</text><text data-event-opts="{{[['tap',[['showUserAgreement',['$event']]]]]}}" class="link" bindtap="__e">《用户协议》</text><text class="agreement-text">和</text><text data-event-opts="{{[['tap',[['showPrivacyPolicy',['$event']]]]]}}" class="link" bindtap="__e">《隐私政策》</text></view></view></view><block wx:if="{{showLoginOptionsModal}}"><view class="login-options-modal"><view data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">登录方式</view><view class="login-options"><view data-event-opts="{{[['tap',[['selectLoginMethod',['phonePassword']]]]]}}" class="login-option-item" bindtap="__e"><text class="option-icon">🔐</text><text class="option-text">账号密码登录</text></view><view data-event-opts="{{[['tap',[['selectLoginMethod',['phoneVerify']]]]]}}" class="login-option-item" bindtap="__e"><text class="option-icon">📱</text><text class="option-text">手机号验证码登录</text></view><view data-event-opts="{{[['tap',[['selectLoginMethod',['register']]]]]}}" class="login-option-item" bindtap="__e"><text class="option-icon">📝</text><text class="option-text">注册账号</text></view></view><view class="modal-close"><text data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="close-btn" bindtap="__e">关闭</text></view></view></view></block><block wx:if="{{showPhoneVerifyModal}}"><view class="phone-login-modal"><view data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">手机号验证码登录</view><view class="input-box"><uni-easyinput bind:input="__e" vue-id="35a7246c-1" placeholder="请输入手机号" type="number" maxlength="11" focus="{{true}}" value="{{mobile}}" data-event-opts="{{[['^input',[['__set_model',['','mobile','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view><view class="input-box verification-box"><input type="number" maxlength="6" placeholder="请输入验证码" placeholder-class="input-placeholder" data-event-opts="{{[['input',[['__set_model',['','verificationCode','$event',[]]]]]]}}" value="{{verificationCode}}" bindinput="__e"/><button class="get-code-btn" disabled="{{countdown>0}}" data-event-opts="{{[['tap',[['getVerificationCode',['$event']]]]]}}" bindtap="__e">{{''+(countdown>0?countdown+'秒后重试':'获取验证码')+''}}</button></view><view class="modal-buttons"><button data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-btn cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmPhoneVerifyLogin',['$event']]]]]}}" class="modal-btn confirm-btn" bindtap="__e">确定</button></view></view></view></block><block wx:if="{{showPhonePasswordModal}}"><view class="phone-login-modal"><view data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">账号密码登录</view><view class="input-box"><uni-easyinput bind:input="__e" vue-id="35a7246c-2" placeholder="请输入用户名/手机号" focus="{{true}}" value="{{account}}" data-event-opts="{{[['^input',[['__set_model',['','account','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view><view class="input-box"><uni-easyinput bind:input="__e" vue-id="35a7246c-3" placeholder="请输入密码" type="password" value="{{password}}" data-event-opts="{{[['^input',[['__set_model',['','password','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view><view class="modal-buttons"><button data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-btn cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmPhonePasswordLogin',['$event']]]]]}}" class="modal-btn confirm-btn" bindtap="__e">确定</button></view></view></view></block><block wx:if="{{showRegisterModal}}"><view class="phone-login-modal"><view data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">注册账号</view><view class="input-box"><uni-easyinput bind:input="__e" vue-id="35a7246c-4" placeholder="请输入手机号" type="number" maxlength="11" focus="{{true}}" value="{{mobile}}" data-event-opts="{{[['^input',[['__set_model',['','mobile','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view><view class="input-box verification-box"><input type="number" maxlength="6" placeholder="请输入验证码" placeholder-class="input-placeholder" data-event-opts="{{[['input',[['__set_model',['','verificationCode','$event',[]]]]]]}}" value="{{verificationCode}}" bindinput="__e"/><button class="get-code-btn" disabled="{{countdown>0}}" data-event-opts="{{[['tap',[['getVerificationCode',['$event']]]]]}}" bindtap="__e">{{''+(countdown>0?countdown+'秒后重试':'获取验证码')+''}}</button></view><view class="input-box"><uni-easyinput bind:input="__e" vue-id="35a7246c-5" placeholder="请设置密码" type="password" value="{{password}}" data-event-opts="{{[['^input',[['__set_model',['','password','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view><view class="input-box"><uni-easyinput bind:input="__e" vue-id="35a7246c-6" placeholder="请确认密码" type="password" value="{{confirmPassword}}" data-event-opts="{{[['^input',[['__set_model',['','confirmPassword','$event',[]]]]]]}}" bind:__l="__l"></uni-easyinput></view><view class="modal-buttons"><button data-event-opts="{{[['tap',[['closeLoginModals',['$event']]]]]}}" class="modal-btn cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmRegister',['$event']]]]]}}" class="modal-btn confirm-btn" bindtap="__e">确定</button></view></view></view></block><block wx:if="{{showCaptchaModal}}"><view class="phone-login-modal"><view data-event-opts="{{[['tap',[['closeCaptchaModal',['$event']]]]]}}" class="modal-mask" bindtap="__e"></view><view class="modal-content"><view class="modal-title">请输入图形验证码</view><view class="captcha-img-box"><image class="captcha-img" src="{{captchaData?captchaData.captchaBase64:''}}" mode="widthFix" data-event-opts="{{[['tap',[['refreshCaptcha',['$event']]]]]}}" bindtap="__e"></image><text data-event-opts="{{[['tap',[['refreshCaptcha',['$event']]]]]}}" class="refresh-text" bindtap="__e">刷新验证码</text></view><view class="input-box"><input type="text" maxlength="4" placeholder="请输入图形验证码" placeholder-class="input-placeholder" focus="{{true}}" data-event-opts="{{[['input',[['__set_model',['','captchaCode','$event',[]]]]]]}}" value="{{captchaCode}}" bindinput="__e"/></view><view class="modal-buttons"><button data-event-opts="{{[['tap',[['closeCaptchaModal',['$event']]]]]}}" class="modal-btn cancel-btn" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['confirmCaptchaAndSendSms',['$event']]]]]}}" class="modal-btn confirm-btn" bindtap="__e">确定</button></view></view></view></block></view>