{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/yueke/YueKe/pages/admin/cloudTest.vue?7d85","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/yueke/YueKe/pages/admin/cloudTest.vue?d2df","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/yueke/YueKe/pages/admin/cloudTest.vue?5b4b","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/yueke/YueKe/pages/admin/cloudTest.vue?3ae2","uni-app:///pages/admin/cloudTest.vue","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/yueke/YueKe/pages/admin/cloudTest.vue?3ff8","webpack:///C:/Users/liuxingyu/Desktop/TurboTrainning-main/yueke/YueKe/pages/admin/cloudTest.vue?985f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","spaceId","isDevMode","currentMode","testModes","name","value","loading","normal","init","error","results","logs","onLoad","methods","onModeChange","runTest","type","runNormalTest","uni","message","testMode","result","success","runInitTest","provider","endpoint","runErrorTest","promise","fail","details","formatError","checkCloudFiles","title","content","showCancel","resetCloudEnv","icon","toggleDevMode","getApp","copySpaceId","addLog","time","console","clearLogs"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,kBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;AACa;;;AAGrE;AACgM;AAChM,gBAAgB,yMAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAA0uB,CAAgB,+vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCmG9vB;EACAC;IACA;MACAC;MACAC;MACAC;MAAA;MACAC,YACA;QAAAC;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,GACA;QAAAD;QAAAC;MAAA,EACA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAH;QACAC;QACAC;MACA;MACAE;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA;IACAC;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBAAA;gBAAA,cAGAC;gBAAA,gCACA,+BAGA,6BAGA;gBAAA;cAAA;gBAAA;gBAAA,OALA;cAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAA;cAAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAIA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAAA;gBAAA,OAGAC;kBACAd;kBACAL;oBACAoB;oBACAC;kBACA;gBACA;cAAA;gBANAC;gBAQA;gBACA;kBACAC;kBACAH;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;gBACA;kBACAG;kBACAH;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAGA;gBACA;kBACA;kBACAL;oBACAM;oBACAxB;oBACAyB;kBACA;gBACA;gBAAA;gBAAA,OAEAP;kBACAd;kBACAL;oBACAoB;oBACAC;kBACA;gBACA;cAAA;gBANAC;gBAQA;gBACA;kBACAC;kBACAH;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;gBACA;kBACAG;kBACAH;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAO;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAGA;gBACAC;kBACAT;oBACAd;oBACAL;sBACAoB;sBACAC;oBACA;oBACAE;sBAAA;oBAAA;oBACAM;sBAAA;oBAAA;kBACA;gBACA;gBAAA;gBAAA,OAEAD;cAAA;gBAAAN;gBAEA;gBACA;kBACAC;kBACAH;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEA;gBAEAU,6HACA,oFACA,oEACA;gBAEA;kBACAP;kBACAH;kBACAU;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAC;MACA;MAEA;MAEA;QACA;QACA;QACAX;MACA;QACAA;MACA;QACAA;MACA;MAEA;IACA;IAEA;IACAY;MACA;;MAEA;MACA;MACAb;QACAc;QACAC,uCACA,sDACA,4DACA;QACAC;MACA;IACA;IAEA;IACAC;MACA;MAEA;QACAjB;UACAM;UACAxB;UACAyB;QACA;QAEA;QAEAP;UACAc;UACAI;QACA;MACA;QACA;QAEAlB;UACAc;UACAI;QACA;MACA;IACA;IAEA;IACAC;MACA;MACAC;MAEA;MAEApB;QACAc;QACAI;MACA;IACA;IAEA;IACAG;MACArB;QACAnB;QACAuB;UACAJ;YACAc;YACAI;UACA;QACA;MACA;IACA;IAEA;IACAI;MACA;MACA;MAEA;QACAxB;QACAyB;QACAtB;MACA;;MAEA;MACA;QACA;MACA;;MAEA;MACA;QACAuB;MACA;QACAA;MACA;QACAA;MACA;IACA;IAEA;IACAC;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AChYA;AAAA;AAAA;AAAA;AAAkjC,CAAgB,4iCAAG,EAAC,C;;;;;;;;;;;ACAtkC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/admin/cloudTest.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/admin/cloudTest.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./cloudTest.vue?vue&type=template&id=7bbaba84&\"\nvar renderjs\nimport script from \"./cloudTest.vue?vue&type=script&lang=js&\"\nexport * from \"./cloudTest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cloudTest.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/admin/cloudTest.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cloudTest.vue?vue&type=template&id=7bbaba84&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.logs.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cloudTest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cloudTest.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"container\">\r\n    <view class=\"header\">\r\n      <text class=\"title\">阿里云函数连接测试</text>\r\n    </view>\r\n    \r\n    <view class=\"info-section\">\r\n      <view class=\"info-item\">\r\n        <text class=\"label\">云服务商:</text>\r\n        <text class=\"value\">阿里云</text>\r\n      </view>\r\n      <view class=\"info-item\">\r\n        <text class=\"label\">云环境ID:</text>\r\n        <text class=\"value\">{{spaceId}}</text>\r\n        <text class=\"copy-btn\" @tap=\"copySpaceId\">复制</text>\r\n      </view>\r\n      <view class=\"info-item\">\r\n        <text class=\"label\">当前模式:</text>\r\n        <text class=\"value\" :class=\"isDevMode ? 'warning' : 'success'\">\r\n          {{isDevMode ? '模拟数据模式' : '云服务模式'}}\r\n        </text>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"mode-selector\">\r\n      <view class=\"section-title\">测试模式</view>\r\n      <radio-group @change=\"onModeChange\">\r\n        <label class=\"mode-item\" v-for=\"(item, index) in testModes\" :key=\"index\">\r\n          <radio :value=\"item.value\" :checked=\"item.value === currentMode\" />\r\n          <text>{{item.name}}</text>\r\n        </label>\r\n      </radio-group>\r\n    </view>\r\n    \r\n    <view class=\"test-panel\">\r\n      <view class=\"panel-title\">云函数测试</view>\r\n      \r\n      <view class=\"test-group\">\r\n        <view class=\"test-name\">常规测试</view>\r\n        <view class=\"test-desc\">使用uni.cloud调用云函数</view>\r\n        <button @tap=\"runTest('normal')\" type=\"primary\" :loading=\"loading.normal\">测试</button>\r\n        <view class=\"result\" v-if=\"results.normal\">\r\n          <view class=\"status\" :class=\"results.normal.success ? 'success' : 'error'\">\r\n            {{results.normal.success ? '成功' : '失败'}}\r\n          </view>\r\n          <view class=\"message\">{{results.normal.message}}</view>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"test-group\">\r\n        <view class=\"test-name\">直接初始化测试</view>\r\n        <view class=\"test-desc\">先重新初始化云环境再调用</view>\r\n        <button @tap=\"runTest('init')\" type=\"primary\" :loading=\"loading.init\">测试</button>\r\n        <view class=\"result\" v-if=\"results.init\">\r\n          <view class=\"status\" :class=\"results.init.success ? 'success' : 'error'\">\r\n            {{results.init.success ? '成功' : '失败'}}\r\n          </view>\r\n          <view class=\"message\">{{results.init.message}}</view>\r\n        </view>\r\n      </view>\r\n      \r\n      <view class=\"test-group\">\r\n        <view class=\"test-name\">错误处理测试</view>\r\n        <view class=\"test-desc\">详细显示错误信息</view>\r\n        <button @tap=\"runTest('error')\" type=\"primary\" :loading=\"loading.error\">测试</button>\r\n        <view class=\"result\" v-if=\"results.error\">\r\n          <view class=\"status\" :class=\"results.error.success ? 'success' : 'error'\">\r\n            {{results.error.success ? '成功' : '失败'}}\r\n          </view>\r\n          <view class=\"message\">{{results.error.message}}</view>\r\n          <view class=\"details\" v-if=\"results.error.details\">\r\n            <text selectable>{{results.error.details}}</text>\r\n          </view>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <view class=\"actions\">\r\n      <button type=\"default\" @tap=\"checkCloudFiles\">检查云函数文件</button>\r\n      <button type=\"default\" @tap=\"resetCloudEnv\">重置云环境</button>\r\n      <button type=\"warn\" @tap=\"toggleDevMode\">\r\n        {{isDevMode ? '切换到云服务模式' : '切换到模拟数据模式'}}\r\n      </button>\r\n    </view>\r\n    \r\n    <view class=\"log-section\" v-if=\"logs.length > 0\">\r\n      <view class=\"section-title\">日志</view>\r\n      <scroll-view scroll-y class=\"log-content\">\r\n        <view v-for=\"(log, index) in logs\" :key=\"index\" class=\"log-item\" :class=\"log.type\">\r\n          <text class=\"log-time\">{{log.time}}</text>\r\n          <text class=\"log-message\" selectable>{{log.message}}</text>\r\n        </view>\r\n      </scroll-view>\r\n      <button size=\"mini\" type=\"default\" @tap=\"clearLogs\">清除日志</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      spaceId: '',\r\n      isDevMode: false,\r\n      currentMode: 'basic', // 默认测试模式\r\n      testModes: [\r\n        { name: '基础连接测试', value: 'basic' },\r\n        { name: '详细信息测试', value: 'detail' },\r\n        { name: '数据库连接测试', value: 'db' },\r\n        { name: '错误处理测试', value: 'error' }\r\n      ],\r\n      loading: {\r\n        normal: false,\r\n        init: false,\r\n        error: false\r\n      },\r\n      results: {\r\n        normal: null,\r\n        init: null,\r\n        error: null\r\n      },\r\n      logs: []\r\n    }\r\n  },\r\n  onLoad() {\r\n    this.spaceId = getApp().globalData.$spaceId || '-';\r\n    this.isDevMode = getApp().globalData.$isDevMode || false;\r\n    this.addLog('info', '页面加载完成，云环境ID: ' + this.spaceId);\r\n  },\r\n  methods: {\r\n    // 切换测试模式\r\n    onModeChange(e) {\r\n      this.currentMode = e.detail.value;\r\n      this.addLog('info', `已切换到测试模式: ${this.currentMode}`);\r\n    },\r\n    \r\n    // 运行测试\r\n    async runTest(type) {\r\n      this.loading[type] = true;\r\n      this.results[type] = null;\r\n      \r\n      try {\r\n        switch(type) {\r\n          case 'normal':\r\n            await this.runNormalTest();\r\n            break;\r\n          case 'init':\r\n            await this.runInitTest();\r\n            break;\r\n          case 'error':\r\n            await this.runErrorTest();\r\n            break;\r\n        }\r\n      } catch (error) {\r\n        this.addLog('error', `${type}测试发生异常: ${error.message}`);\r\n      } finally {\r\n        this.loading[type] = false;\r\n      }\r\n    },\r\n    \r\n    // 常规测试\r\n    async runNormalTest() {\r\n      this.addLog('info', `开始常规测试，模式: ${this.currentMode}...`);\r\n      \r\n      try {\r\n        const result = await uni.cloud.callFunction({\r\n          name: 'test',\r\n          data: {\r\n            message: '常规测试 ' + new Date().toLocaleString(),\r\n            testMode: this.currentMode\r\n          }\r\n        });\r\n        \r\n        this.addLog('success', `常规测试成功: ${JSON.stringify(result.result)}`);\r\n        this.results.normal = {\r\n          success: true,\r\n          message: `调用成功: ${result.result.message || 'OK'}`\r\n        };\r\n      } catch (error) {\r\n        this.addLog('error', `常规测试失败: ${JSON.stringify(error)}`);\r\n        this.results.normal = {\r\n          success: false,\r\n          message: this.formatError(error)\r\n        };\r\n      }\r\n    },\r\n    \r\n    // 初始化测试\r\n    async runInitTest() {\r\n      this.addLog('info', `开始初始化测试，模式: ${this.currentMode}...`);\r\n      \r\n      try {\r\n        // 先清除并重新初始化uni.cloud\r\n        if (uni.cloud) {\r\n          this.addLog('info', '重新初始化云环境...');\r\n          uni.cloud.init({\r\n            provider: 'aliyun',\r\n            spaceId: this.spaceId,\r\n            endpoint: 'https://api.next.bspapp.com'\r\n          });\r\n        }\r\n        \r\n        const result = await uni.cloud.callFunction({\r\n          name: 'test',\r\n          data: {\r\n            message: '初始化测试 ' + new Date().toLocaleString(),\r\n            testMode: this.currentMode\r\n          }\r\n        });\r\n        \r\n        this.addLog('success', `初始化测试成功: ${JSON.stringify(result.result)}`);\r\n        this.results.init = {\r\n          success: true,\r\n          message: `调用成功: ${result.result.message || 'OK'}`\r\n        };\r\n      } catch (error) {\r\n        this.addLog('error', `初始化测试失败: ${JSON.stringify(error)}`);\r\n        this.results.init = {\r\n          success: false,\r\n          message: this.formatError(error)\r\n        };\r\n      }\r\n    },\r\n    \r\n    // 错误处理测试\r\n    async runErrorTest() {\r\n      this.addLog('info', `开始错误处理测试，模式: ${this.currentMode}...`);\r\n      \r\n      try {\r\n        // 使用Promise方式，以便获取更详细的错误信息\r\n        const promise = new Promise((resolve, reject) => {\r\n          uni.cloud.callFunction({\r\n            name: 'test',\r\n            data: { \r\n              message: '错误处理测试',\r\n              testMode: this.currentMode\r\n            },\r\n            success: (res) => resolve(res),\r\n            fail: (err) => reject(err)\r\n          });\r\n        });\r\n        \r\n        const result = await promise;\r\n        \r\n        this.addLog('success', `错误处理测试成功: ${JSON.stringify(result.result)}`);\r\n        this.results.error = {\r\n          success: true,\r\n          message: `调用成功: ${result.result.message || 'OK'}`\r\n        };\r\n      } catch (error) {\r\n        this.addLog('error', `错误处理测试失败: ${JSON.stringify(error)}`);\r\n        \r\n        const details = `错误类型: ${error.errCode || 'Unknown'}\\n` +\r\n                        `错误消息: ${error.errMsg || error.message || 'Unknown'}\\n` +\r\n                        `callId: ${error.callId || 'N/A'}\\n` +\r\n                        `调用栈: ${error.stack || 'N/A'}`;\r\n        \r\n        this.results.error = {\r\n          success: false,\r\n          message: this.formatError(error),\r\n          details: details\r\n        };\r\n      }\r\n    },\r\n    \r\n    // 格式化错误信息\r\n    formatError(error) {\r\n      if (typeof error === 'string') return error;\r\n      \r\n      let message = '';\r\n      \r\n      if (error.errMsg) {\r\n        // 提取errMsg中的主要错误信息\r\n        const match = error.errMsg.match(/fail\\s+(.*?)(?:\\s+\\(|$)/);\r\n        message = match ? match[1] : error.errMsg;\r\n      } else if (error.message) {\r\n        message = error.message;\r\n      } else {\r\n        message = '未知错误';\r\n      }\r\n      \r\n      return message;\r\n    },\r\n    \r\n    // 检查云函数文件\r\n    checkCloudFiles() {\r\n      this.addLog('info', '检查云函数文件...');\r\n      \r\n      // 在小程序中无法直接检查文件系统\r\n      // 这里提示用户检查HBuilderX中的文件\r\n      uni.showModal({\r\n        title: '云函数文件检查',\r\n        content: '请在HBuilderX中检查以下文件是否存在：\\n' +\r\n                 '1. uniCloud-aliyun/cloudfunctions/test/index.js\\n' +\r\n                 '2. uniCloud-aliyun/cloudfunctions/test/package.json\\n\\n' +\r\n                 '并确保这些文件已上传部署到阿里云。',\r\n        showCancel: false\r\n      });\r\n    },\r\n    \r\n    // 重置云环境\r\n    resetCloudEnv() {\r\n      this.addLog('info', '重置云环境...');\r\n      \r\n      if (uni.cloud) {\r\n        uni.cloud.init({\r\n          provider: 'aliyun',\r\n          spaceId: this.spaceId,\r\n          endpoint: 'https://api.next.bspapp.com'\r\n        });\r\n        \r\n        this.addLog('success', '云环境已重置');\r\n        \r\n        uni.showToast({\r\n          title: '云环境已重置',\r\n          icon: 'success'\r\n        });\r\n      } else {\r\n        this.addLog('error', '无法重置云环境，uni.cloud不存在');\r\n        \r\n        uni.showToast({\r\n          title: '重置失败',\r\n          icon: 'none'\r\n        });\r\n      }\r\n    },\r\n    \r\n    // 切换开发模式\r\n    toggleDevMode() {\r\n      this.isDevMode = !this.isDevMode;\r\n      getApp().globalData.$isDevMode = this.isDevMode;\r\n      \r\n      this.addLog('info', `已切换到${this.isDevMode ? '模拟数据' : '云服务'}模式`);\r\n      \r\n      uni.showToast({\r\n        title: `已切换到${this.isDevMode ? '模拟数据' : '云服务'}模式`,\r\n        icon: 'none'\r\n      });\r\n    },\r\n    \r\n    // 复制云环境ID\r\n    copySpaceId() {\r\n      uni.setClipboardData({\r\n        data: this.spaceId,\r\n        success: () => {\r\n          uni.showToast({\r\n            title: '已复制',\r\n            icon: 'success'\r\n          });\r\n        }\r\n      });\r\n    },\r\n    \r\n    // 添加日志\r\n    addLog(type, message) {\r\n      const now = new Date();\r\n      const time = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;\r\n      \r\n      this.logs.unshift({\r\n        type,\r\n        time,\r\n        message\r\n      });\r\n      \r\n      // 限制日志数量\r\n      if (this.logs.length > 50) {\r\n        this.logs.length = 50;\r\n      }\r\n      \r\n      // 输出到控制台\r\n      if (type === 'error') {\r\n        console.error(`[${time}] ${message}`);\r\n      } else if (type === 'success') {\r\n        console.log(`[${time}] ✓ ${message}`);\r\n      } else {\r\n        console.log(`[${time}] ${message}`);\r\n      }\r\n    },\r\n    \r\n    // 清除日志\r\n    clearLogs() {\r\n      this.logs = [];\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  padding: 30rpx;\r\n}\r\n\r\n.header {\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: var(--theme-color);\r\n}\r\n\r\n.info-section {\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.info-item {\r\n  display: flex;\r\n  padding: 15rpx 0;\r\n  border-bottom: 1px solid #f2f2f2;\r\n}\r\n\r\n.info-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.label {\r\n  width: 180rpx;\r\n  color: #666;\r\n}\r\n\r\n.value {\r\n  flex: 1;\r\n}\r\n\r\n.copy-btn {\r\n  color: var(--theme-color);\r\n  font-size: 24rpx;\r\n  padding: 0 20rpx;\r\n}\r\n\r\n.success {\r\n  color: #07c160;\r\n}\r\n\r\n.warning {\r\n  color: #ff8d3c;\r\n}\r\n\r\n.error {\r\n  color: #fa5151;\r\n}\r\n\r\n.mode-selector {\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.mode-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.mode-item text {\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.test-panel {\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.panel-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.test-group {\r\n  margin-bottom: 30rpx;\r\n  padding-bottom: 20rpx;\r\n  border-bottom: 1px solid #f2f2f2;\r\n}\r\n\r\n.test-group:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.test-name {\r\n  font-size: 28rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.test-desc {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.result {\r\n  margin-top: 15rpx;\r\n  background-color: #f8f8f8;\r\n  padding: 15rpx;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n.status {\r\n  font-weight: bold;\r\n  margin-bottom: 10rpx;\r\n}\r\n\r\n.details {\r\n  margin-top: 10rpx;\r\n  font-size: 24rpx;\r\n  background-color: #fff;\r\n  padding: 10rpx;\r\n  border-radius: 4rpx;\r\n  white-space: pre-wrap;\r\n  word-break: break-all;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.log-section {\r\n  background-color: #fff;\r\n  border-radius: 10rpx;\r\n  padding: 20rpx;\r\n  margin-top: 30rpx;\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.log-content {\r\n  max-height: 400rpx;\r\n  margin-bottom: 15rpx;\r\n}\r\n\r\n.log-item {\r\n  padding: 10rpx 0;\r\n  font-size: 24rpx;\r\n  border-bottom: 1px solid #f5f5f5;\r\n}\r\n\r\n.log-item.error {\r\n  color: #fa5151;\r\n}\r\n\r\n.log-item.success {\r\n  color: #07c160;\r\n}\r\n\r\n.log-time {\r\n  color: #999;\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.log-message {\r\n  word-break: break-all;\r\n}\r\n</style> ","import mod from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cloudTest.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.55.2025030718\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cloudTest.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1742398284796\n      var cssReload = require(\"D:/HBuilderX.4.55.2025030718/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}